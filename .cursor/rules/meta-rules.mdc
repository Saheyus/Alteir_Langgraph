---
alwaysApply: true
---
## ğŸ“ Format des Rules (MDC)

### Extension et Structure
**Format MDC** (.mdc) = Markdown + mÃ©tadonnÃ©es YAML

```markdown
---
description: Description courte pour l'IA
globs: ["**/*.py", "tests/**"]
alwaysApply: false
---

# Contenu de la rÃ¨gle en Markdown

- Instructions claires
- Exemples concrets
```

### Types de RÃ¨gles (via mÃ©tadonnÃ©es)

| Type | Quand l'inclure | MÃ©tadonnÃ©es |
|------|----------------|-------------|
| **Always** | Toujours dans le contexte | `alwaysApply: true` |
| **Auto Attached** | Quand fichiers matchent `globs` | `globs: ["pattern"]` |
| **Agent Requested** | L'IA dÃ©cide (besoin `description`) | `description: "..."` |
| **Manual** | Seulement si `@ruleName` | Par dÃ©faut |

### Nom de fichier
```
nom-descriptif-kebab-case.mdc
```

Exemples :
- âœ… `export-notion.mdc`
- âœ… `tests-python.mdc`
- âœ… `debug-practices.mdc`
- âŒ `GUIDE_TESTS.md`
- âŒ `readme.txt`

---

## âœï¸ Structure d'une Rule MDC

### 1. Titre clair et descriptif
```markdown
# Nom de la RÃ¨gle - Contexte

Exemple : # Export Notion - RÃ¨gles de Bac Ã  Sable
```

### 2. Section "Contexte" ou "Objectif"
Explique **pourquoi** cette rÃ¨gle existe.

```markdown
## ğŸ¯ Objectif

Cette rÃ¨gle dÃ©finit comment l'IA doit gÃ©rer l'export Notion
pour Ã©viter de polluer la base principale.
```

### 3. RÃ¨gles claires et actionnables
Utilise des verbes d'action : TOUJOURS, JAMAIS, DOIT, NE DOIT PAS

```markdown
## âœ… RÃ¨gles

**TOUJOURS** exporter vers le bac Ã  sable.
**JAMAIS** crÃ©er dans la base principale sans validation.
**DOIT** utiliser fuzzy matching pour les relations.
```

### 4. Exemples concrets
Code ou commandes spÃ©cifiques.

```markdown
## ğŸ“ Exemple

\`\`\`python
# âœ… Correct
database_id = "2806e4d21b458012a744d8d6723c8be1"  # Sandbox

# âŒ Incorrect
database_id = "1886e4d21b4581a29340f77f5f2e5885"  # Principal
\`\`\`
```

### 5. RÃ©fÃ©rences utiles
IDs, URLs, commandes, fichiers Ã  consulter.

```markdown
## ğŸ“š RÃ©fÃ©rences

- Fichier principal : `app_streamlit.py`
- Resolver : `agents/notion_relation_resolver.py`
- Tests : `tests/test_export_*.py`
```

---

## ğŸš« Ce qu'il NE FAUT PAS faire

### âŒ CrÃ©er des guides utilisateur dans .cursor/rules/
L'utilisateur n'a pas besoin de lire les rules.

### âŒ Documenter l'usage de l'interface
L'interface doit Ãªtre intuitive. Si besoin, amÃ©liorer l'interface.

### âŒ Dupliquer le code dans les rules
RÃ©fÃ©rencer les fichiers, ne pas copier le code.

### âŒ CrÃ©er des rÃ¨gles trop gÃ©nÃ©rales
"Bien coder" âŒ â†’ "Toujours valider les IDs Notion avant export" âœ…

### âŒ DÃ©passer 500 lignes
**Bonnes pratiques Cursor :** Limiter Ã  500 lignes maximum.
Si plus long â†’ Scinder en plusieurs rules composables.

### âŒ Oublier de supprimer les vieux guides mal placÃ©s
Si une rule remplace un guide, supprimer l'ancien fichier.

---

## âœ… Ce qu'il FAUT faire

### âœ… Documenter les dÃ©cisions techniques
Pourquoi cette architecture ? Pourquoi ce choix ?

### âœ… Lister les ID importants (Notion, etc.)
L'IA en a besoin pour travailler.

### âœ… Expliquer les workflows critiques
Export, gÃ©nÃ©ration, tests, etc.

### âœ… Documenter les piÃ¨ges connus
Ce qui a causÃ© des bugs, les solutions.

### âœ… Mettre Ã  jour les rules quand le code change
Rules obsolÃ¨tes = bugs.

---

## ğŸ”„ Workflow : CrÃ©er une Nouvelle Rule

1. **Identifier le besoin**
   - Comportement critique qui se rÃ©pÃ¨te
   - RÃ¨gle de projet spÃ©cifique
   - PiÃ¨ge Ã  Ã©viter

2. **Choisir un nom descriptif**
   ```
   .cursor/rules/nom-contexte.mdc
   ```

3. **Structurer la rule**
   - Titre + contexte
   - RÃ¨gles claires (TOUJOURS/JAMAIS)
   - Exemples concrets
   - RÃ©fÃ©rences

4. **Supprimer les anciens guides mal placÃ©s**
   ```bash
   git rm GUIDE_XXX.md
   git rm docs/README_XXX.md
   ```

5. **Committer**
   ```bash
   git add .cursor/rules/nouvelle-rule.mdc
   git commit -m "rules: Ajouter rÃ¨gle pour XXX"
   ```

---

## ğŸ“‹ Checklist CrÃ©ation de Rule

Avant de committer :
- [ ] Fichier dans `.cursor/rules/` ?
- [ ] Extension `.mdc` ?
- [ ] Nom descriptif en kebab-case ?
- [ ] Titre clair ?
- [ ] RÃ¨gles actionnables (TOUJOURS/JAMAIS) ?
- [ ] Exemples concrets ?
- [ ] Pas de duplication de code ?
- [ ] Anciens guides mal placÃ©s supprimÃ©s ?
- [ ] Commit message clair (`rules: ...`) ?

---

## ğŸ“ Exemples de Rules Bien Faites

### `.cursor/rules/export-notion.mdc`
- âœ… IDs sandbox vs principal
- âœ… Workflow complet
- âœ… PiÃ¨ges Ã  Ã©viter
- âœ… RÃ©fÃ©rences aux fichiers

### `.cursor/rules/tests.mdc`
- âœ… Organisation des tests
- âœ… Marqueurs pytest
- âœ… Conventions nommage
- âœ… Checklist avant commit

### `.cursor/rules/debug-practices.mdc`
- âœ… Interdit les fichiers temporaires
- âœ… Alternatives (`python -c`)
- âœ… OÃ¹ mettre les tests durables

---

## ğŸ”¥ Rappel Important

**Si l'IA oublie de crÃ©er une rule pour une dÃ©cision importante :**
â†’ L'utilisateur doit le rappeler : "CrÃ©e une rule pour Ã§a"

**Si l'IA crÃ©e un guide utilisateur dans le projet :**
â†’ C'est une erreur, dÃ©placer dans `.cursor/rules/` en `.mdc`

**Si une rule existe dÃ©jÃ  sur le sujet :**
â†’ Mettre Ã  jour la rule existante, ne pas crÃ©er de doublon

---

## ğŸ’¡ Quand CrÃ©er une Rule ?

âœ… **OUI, crÃ©er une rule :**
- RÃ¨gle critique qui se rÃ©pÃ¨te (export, tests, API)
- IDs/URLs Ã  mÃ©moriser (bases Notion, endpoints)
- Workflow complexe (gÃ©nÃ©ration multi-agents)
- PiÃ¨ge connu qui a causÃ© des bugs
- Architecture ou dÃ©cision importante
- Conventions de code projet-spÃ©cifiques

âŒ **NON, ne pas crÃ©er de rule :**
- Explication du code (mettre en commentaire)
- Guide utilisateur (amÃ©liorer l'interface)
- Bonnes pratiques gÃ©nÃ©rales (dÃ©jÃ  connues)
- Changement temporaire (sera refactorÃ©)

---

## ğŸ¯ Objectif Final

**L'IA doit pouvoir travailler efficacement sur le projet en lisant les rules.**

Si l'IA fait la mÃªme erreur plusieurs fois â†’ CrÃ©er une rule.
Si une dÃ©cision importante est prise â†’ Documenter dans une rule.
Si un workflow est complexe â†’ CrÃ©er une rule.

**RÃ©sultat :** Moins de bugs, plus de cohÃ©rence, meilleure productivitÃ©.
