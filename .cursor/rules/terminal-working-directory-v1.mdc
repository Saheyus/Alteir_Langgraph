---
description: Fix terminal working directory to always start in project root
globs: ["**/*.{cmd,ps1,sh}", ".vscode/**", "*.code-workspace"]
---

# Terminal Working Directory Configuration

## Probl√®me

Au d√©marrage de nouvelles conversations dans Cursor, le terminal s'ouvrait syst√©matiquement dans `C:\Users\ecali` (USERPROFILE) au lieu du dossier du projet `F:\Projets\Langgraph Alteir`.

### Sympt√¥mes
- Premi√®re commande git/terminal commence dans le mauvais r√©pertoire
- Besoin de faire `cd "F:\Projets\Langgraph Alteir"` manuellement √† chaque fois
- Le workspace file seul ne suffisait pas

### Cause Identifi√©e
PowerShell d√©marre par d√©faut dans `$env:USERPROFILE` si aucune configuration locale n'est pr√©sente. Le param√®tre `terminal.integrated.cwd` dans le workspace file n'est pas toujours respect√© par Cursor au d√©marrage des nouvelles conversations.

## D√©cision

**Cr√©er un dossier `.vscode/` avec `settings.json` pour forcer le working directory.**

Cela compl√®te le workspace file et garantit que VS Code/Cursor respecte le dossier du projet comme working directory initial.

## Checklist

- [x] Cr√©er `.vscode/settings.json` avec `terminal.integrated.cwd`
- [x] V√©rifier que le workspace file existe
- [x] Tester dans une nouvelle conversation Cursor
- [ ] Ajouter `.vscode/` au `.gitignore` si n√©cessaire (d√©cision projet)

## Configuration

### Fichier cr√©√© : `.vscode/settings.json`
```json
{
  "terminal.integrated.cwd": "${workspaceFolder}",
  "terminal.integrated.defaultProfile.windows": "PowerShell",
  "files.eol": "\n",
  "python.defaultInterpreterPath": "${workspaceFolder}/.venv/Scripts/python.exe"
}
```

### Workspace file existant : `Langgraphworkspace.code-workspace`
```json
{
  "folders": [
    {
      "path": "F:\\Projets\\Langgraph Alteir"
    }
  ],
  "settings": {
    "terminal.integrated.cwd": "${workspaceFolder}"
  }
}
```

## Exemples

### ‚ùå Avant (Mauvais)
```powershell
# Terminal s'ouvre dans C:\Users\ecali
PS C:\Users\ecali> git status
fatal: not a git repository
```

### ‚úÖ Apr√®s (Bon)
```powershell
# Terminal s'ouvre dans le projet
PS F:\Projets\Langgraph Alteir> git status
On branch main
Your branch is up to date with 'origin/main'.
```

## V√©rification

```powershell
# Commande simple pour v√©rifier le working directory
pwd

# Devrait afficher :
# Path
# ----
# F:\Projets\Langgraph Alteir
```

## üö® R√àGLE CRITIQUE : Toujours Utiliser Chemins Absolus

**JAMAIS de chemins relatifs dans les commandes PowerShell.**

```powershell
# ‚ùå MAUVAIS
Get-Content .env
python tests/test_export.py

# ‚úÖ BON
Get-Content "F:\Projets\Langgraph Alteir\.env"
python "F:\Projets\Langgraph Alteir\tests\test_export.py"
```

**Raison :** Le shell peut ne pas √™tre dans le bon dossier, m√™me avec `.vscode/settings.json`.

## Notes Additionnelles

- Le param√®tre `terminal.integrated.defaultProfile.windows` garantit que PowerShell est utilis√©
- `files.eol` est configur√© pour LF (compatibilit√© cross-platform)
- `python.defaultInterpreterPath` pointe vers le venv local si pr√©sent

## Changelog

- **2025-10-12**: Ajout r√®gle chemins absolus obligatoires
  - Probl√®me r√©current 10+ fois : shell dans mauvais dossier
  - Solution : **TOUJOURS** utiliser `F:\Projets\Langgraph Alteir\...` dans les commandes
- **2025-10-03**: Cr√©ation initiale (R√©solution probl√®me r√©current working directory)
  - Raison: Terminal d√©marrait dans USERPROFILE au lieu du projet
  - Solution: Ajout de `.vscode/settings.json` avec configuration explicite
